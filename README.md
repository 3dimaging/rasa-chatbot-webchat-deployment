# rasa-chatbot 
This is a tutorial on how to set up rasa-chatbot on your local server using Rasa NLU, Rasa Core, FLASK and ngrok

## Set up
### Rasa Set up
```
mkdir rasa
cd rasa
```
create requirements.txt and paste this inside
```
rasa_core
rasa_sdk
rasa_core_sdk
rasa_nlu[spacy]
nltk
numpy
pandas
scikit-learn
flask
gunicorn
```
then run `pip install -r requirements.txt` else you can do it through `pip install`. Then run `rasa init --no-prompt` to set up a default rasa. 

### Webchat set up
Implemented with [react-chat-widget](https://github.com/mrbot-ai/rasa-webchat)
1. Create a Flask App
Create a file called app.py in the main directory
```
from flask import Flask  
from flask import render_template

# creates a Flask application with name "app"
app = Flask(__name__)

# a route to display our html page called "index.html" gotten from [react-chat-widget](https://github.com/mrbot-ai/rasa-webchat)
@app.route("/")
def index():  
    return render_template('index.html')

# run the application
if __name__ == "__main__":  
    app.run(debug=True)
```

2. Create a folder called `templates`
Since Flask app looks for HTML files from a folder named templates by default.

3. Create a HTML file inside templates folder called `index.html`
4. Paste this html file inside which is modified from the template: [react-chat-widget](https://github.com/mrbot-ai/rasa-webchat)
```
<!doctype html>
<html>
  <head>
  </head>
  <body>
    <div id="webchat">
        <script src="https://storage.googleapis.com/mrbot-cdn/webchat-0.5.8.js"></script>
        <script>
        WebChat.default.init({
            selector: "#webchat",
            initPayload: "/get_started",
            interval: 1000, // 1000 ms between each messageas this will be added to the socket
            socketUrl: "http://localhost:5500",
            socketPath: "/socket.io/",
            title: "Title",
            subtitle: "Subtitle",
            inputTextFieldHint: "Type a message...",
            connectingText: "Waiting for server...",
            hideWhenNotConnected: true,
            fullScreenMode: false,
            profileAvatar: "http://to.avat.ar",
            openLauncherImage: 'myCustomOpenImage.png',
            closeLauncherImage: 'myCustomCloseImage.png',
            params: {
            images: {
                dims: {
                width: 300,
                height: 200,
                }
            },
            storage: "local"
            }
        })
        </script>
    </div>
  </body>
</html>
```
If you want to have a different profile picture of the bot, you can change "profileAvatar:" link to a different link or link it to a bot from a local storage. In my case, I have done this: `profileAvatar: "./assets/bot.png",` where I saved a photo under templates under assets folder called bot.png.'

Now you should have folder looking like this
```
rasa-chatbot (my dir name)
    rasa (autogenerated from the cmd earlier)
    templates
        assets
        index.html
    app.py
    requirements.txt